<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Img Purify</title>
    <link rel="stylesheet" href="./style.css">
    <meta http-equiv="Content-Security-Policy"
            content="
            default-src 'self';
            connect-src 'self';
            img-src     'self' data:;
            script-src  'self' https://cdn.jsdelivr.net;
            style-src   'self' 'unsafe-inline';
            base-uri    'self';
            object-src  'none';
            ">

    <!-- Reduz vazamento de dados de navegação -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta name="referrer" content="same-origin">
</head>
<body>
    <div class="app">
    <h2>Redimensionar & Minificar Imagem</h2>

    <label>Arquivo
        <input type="file" id="img-in" accept="image/*">
    </label>

    <div style="display:flex;gap:1rem">
        <label style="flex:1">Largura (px)
        <input type="number" id="img-w" placeholder="auto">
        </label>
        <label style="flex:1">Altura (px)
        <input type="number" id="img-h" placeholder="auto">
        </label>
    </div>

    <label>Formato de saída
        <select id="img-fmt">
        <option value="image/jpeg">JPEG</option>
        <option value="image/png">PNG</option>
        <option value="image/webp">WebP</option>
        </select>
    </label>

    <label>Qualidade (0–1, só JPEG/WebP)
        <input type="number" id="img-q" min="0" max="1" step=".05" value=".8">
    </label>

    <button id="process-btn">Converter & Baixar</button>

    <div class="stats" id="stats" hidden></div>
    <canvas id="preview" hidden></canvas>
    </div>
<script type="module" src="./script.js"></script>
    <script
    src="https://cdn.jsdelivr.net/npm/pica@9.0.1/dist/pica.min.js"
    integrity="sha512-FH8Ofw1HLbwK/UTvlNBxsfICDXYZBr9dPuTh3j17E5n1QZjaucKikW6UwMREFo7Z42AlIigHha3UVwWepr0Ujw=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
    defer>
  </script>
</body>
</html>
<!-- ———  LIB PICA (resize HQ)  ——— -->
